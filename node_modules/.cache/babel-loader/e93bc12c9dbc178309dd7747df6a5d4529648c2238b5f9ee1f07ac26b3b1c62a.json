{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useKeycloak } from \"@react-keycloak/web\";\nimport axios from \"axios\";\nconst API_URL = \"http://localhost:5000/api/auth\";\nexport const useAuth = () => {\n  _s();\n  const {\n    keycloak\n  } = useKeycloak();\n  const login = async (email, password, rememberMe) => {\n    try {\n      const response = await axios.post(`${API_URL}/login`, {\n        email,\n        password\n      });\n      const token = response.data.token;\n      if (rememberMe) {\n        localStorage.setItem(\"token\", token);\n      } else {\n        sessionStorage.setItem(\"token\", token);\n      }\n      return response.data;\n    } catch (error) {\n      console.error(\"Login failed:\", error);\n      throw error;\n    }\n  };\n  const signup = async (email, password) => {\n    try {\n      await axios.post(`${API_URL}/signup`, {\n        email,\n        password\n      });\n      return \"Signup successful!\";\n    } catch (error) {\n      console.error(\"Signup failed:\", error);\n      throw error;\n    }\n  };\n  const forgotPassword = async email => {\n    try {\n      await axios.post(`${API_URL}/forgot-password`, {\n        email\n      });\n      return \"Password reset email sent!\";\n    } catch (error) {\n      console.error(\"Forgot password failed:\", error);\n      throw error;\n    }\n  };\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    sessionStorage.removeItem(\"token\");\n    keycloak.logout();\n  };\n  return {\n    login,\n    signup,\n    forgotPassword,\n    logout,\n    keycloak\n  };\n};\n_s(useAuth, \"RhI8ij3JxyCvHhezn5pOW/NVOzw=\", false, function () {\n  return [useKeycloak];\n});","map":{"version":3,"names":["useKeycloak","axios","API_URL","useAuth","_s","keycloak","login","email","password","rememberMe","response","post","token","data","localStorage","setItem","sessionStorage","error","console","signup","forgotPassword","logout","removeItem"],"sources":["C:/Users/madko/Downloads/Keycloack_login/payco-auth/src/auth.js"],"sourcesContent":["import { useKeycloak } from \"@react-keycloak/web\";\r\nimport axios from \"axios\";\r\n\r\nconst API_URL = \"http://localhost:5000/api/auth\";\r\n\r\nexport const useAuth = () => {\r\n  const { keycloak } = useKeycloak();\r\n\r\n  const login = async (email, password, rememberMe) => {\r\n    try {\r\n      const response = await axios.post(`${API_URL}/login`, { email, password });\r\n      const token = response.data.token;\r\n\r\n      if (rememberMe) {\r\n        localStorage.setItem(\"token\", token);\r\n      } else {\r\n        sessionStorage.setItem(\"token\", token);\r\n      }\r\n\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(\"Login failed:\", error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const signup = async (email, password) => {\r\n    try {\r\n      await axios.post(`${API_URL}/signup`, { email, password });\r\n      return \"Signup successful!\";\r\n    } catch (error) {\r\n      console.error(\"Signup failed:\", error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const forgotPassword = async (email) => {\r\n    try {\r\n      await axios.post(`${API_URL}/forgot-password`, { email });\r\n      return \"Password reset email sent!\";\r\n    } catch (error) {\r\n      console.error(\"Forgot password failed:\", error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    sessionStorage.removeItem(\"token\");\r\n    keycloak.logout();\r\n  };\r\n\r\n  return { login, signup, forgotPassword, logout, keycloak };\r\n};\r\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,qBAAqB;AACjD,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,gCAAgC;AAEhD,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM;IAAEC;EAAS,CAAC,GAAGL,WAAW,CAAC,CAAC;EAElC,MAAMM,KAAK,GAAG,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,EAAEC,UAAU,KAAK;IACnD,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAAC,GAAGT,OAAO,QAAQ,EAAE;QAAEK,KAAK;QAAEC;MAAS,CAAC,CAAC;MAC1E,MAAMI,KAAK,GAAGF,QAAQ,CAACG,IAAI,CAACD,KAAK;MAEjC,IAAIH,UAAU,EAAE;QACdK,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAAC;MACtC,CAAC,MAAM;QACLI,cAAc,CAACD,OAAO,CAAC,OAAO,EAAEH,KAAK,CAAC;MACxC;MAEA,OAAOF,QAAQ,CAACG,IAAI;IACtB,CAAC,CAAC,OAAOI,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;MACrC,MAAMA,KAAK;IACb;EACF,CAAC;EAED,MAAME,MAAM,GAAG,MAAAA,CAAOZ,KAAK,EAAEC,QAAQ,KAAK;IACxC,IAAI;MACF,MAAMP,KAAK,CAACU,IAAI,CAAC,GAAGT,OAAO,SAAS,EAAE;QAAEK,KAAK;QAAEC;MAAS,CAAC,CAAC;MAC1D,OAAO,oBAAoB;IAC7B,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACtC,MAAMA,KAAK;IACb;EACF,CAAC;EAED,MAAMG,cAAc,GAAG,MAAOb,KAAK,IAAK;IACtC,IAAI;MACF,MAAMN,KAAK,CAACU,IAAI,CAAC,GAAGT,OAAO,kBAAkB,EAAE;QAAEK;MAAM,CAAC,CAAC;MACzD,OAAO,4BAA4B;IACrC,CAAC,CAAC,OAAOU,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,MAAMA,KAAK;IACb;EACF,CAAC;EAED,MAAMI,MAAM,GAAGA,CAAA,KAAM;IACnBP,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC;IAChCN,cAAc,CAACM,UAAU,CAAC,OAAO,CAAC;IAClCjB,QAAQ,CAACgB,MAAM,CAAC,CAAC;EACnB,CAAC;EAED,OAAO;IAAEf,KAAK;IAAEa,MAAM;IAAEC,cAAc;IAAEC,MAAM;IAAEhB;EAAS,CAAC;AAC5D,CAAC;AAACD,EAAA,CAhDWD,OAAO;EAAA,QACGH,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}